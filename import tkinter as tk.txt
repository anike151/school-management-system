import tkinter as tk
from tkinter import ttk, messagebox
import  mysql.connector
def connect_to_database():
    return mysql.connector.connect(
        host="localhost",
        user="root",
        password="1ms22cs040",
        database="school"
    )

def mark_attendance():
    student_id = student_id_entry.get()
    course_id = course_id_entry.get()
    status = status_var.get()
    
    try:
        conn = connect_to_database()
        cursor = conn.cursor()
        query = "INSERT INTO Attendance (student_id, course_id, date, status) VALUES (%s, %s, CURDATE(), %s)"
        cursor.execute(query, (student_id, course_id, status))
        conn.commit()
        messagebox.showinfo("Success", "Attendance marked successfully!")
    except Exception as e:
        messagebox.showerror("Error", str(e))
    finally:
        conn.close()

def attendance_window():
    window = tk.Toplevel()
    window.title("Attendance Management")
    window.geometry("400x300")

    tk.Label(window, text="Student ID").grid(row=0, column=0, padx=10, pady=10)
    student_id_entry = tk.Entry(window)
    student_id_entry.grid(row=0, column=1)

    tk.Label(window, text="Course ID").grid(row=1, column=0, padx=10, pady=10)
    course_id_entry = tk.Entry(window)
    course_id_entry.grid(row=1, column=1)

    tk.Label(window, text="Status").grid(row=2, column=0, padx=10, pady=10)
    status_var = tk.StringVar(value="Present")
    ttk.Combobox(window, textvariable=status_var, values=["Present", "Absent"]).grid(row=2, column=1)

    tk.Button(window, text="Mark Attendance", command=mark_attendance).grid(row=3, column=0, columnspan=2, pady=20)



#### Course Registration Window:
